
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8">
  <title>بطاقة توثيق منجز (برنامج)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{
      font-family: Tahoma, Arial, sans-serif;
      background:#f4f6f5;
      margin:0;
      padding:0;
      color:#1f2a24;
    }
    .page{
      max-width:960px;
      margin:20px auto;
      background:#fff;
      border:1px solid #cfd8d3;
      box-shadow:0 6px 20px rgba(0,0,0,.08);
    }

    /* ===== Header ===== */
    .header{
      background:#2f6b57;
      color:#fff;
      padding:16px;
      text-align:center;
    }
    .header small{
      display:block;
      font-size:14px;
      margin-bottom:6px;
    }
    .header h1{
      font-size:20px;
      margin:0;
      background:rgba(0,0,0,.25);
      display:inline-block;
      padding:8px 18px;
      border-radius:10px;
    }

    /* ===== Content ===== */
    .content{
      padding:16px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:14px;
    }
    th, td{
      border:1px solid #cfd8d3;
      padding:8px 10px;
    }
    th{
      background:#e9f2ee;
      color:#2f6b57;
      width:160px;
      text-align:right;
    }

    .section{
      margin-top:16px;
      background:#e9f2ee;
      color:#2f6b57;
      font-weight:bold;
      padding:8px 12px;
      border:1px solid #cfd8d3;
    }

    /* ===== Images ===== */
    .images{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
      margin-top:10px;
    }
    .img-box{
      border:1px solid #cfd8d3;
      height:260px;
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
    }
    .img-box span{
      position:absolute;
      top:8px;
      right:8px;
      background:rgba(0,0,0,.6);
      color:#fff;
      font-size:12px;
      padding:4px 8px;
      border-radius:20px;
    }
    .img-box img{
      max-width:100%;
      max-height:100%;
      object-fit:contain;
    }

    /* ===== OCR + GPT ===== */
    .analysis{
      margin-top:18px;
      border:1px dashed #b7c7c0;
      padding:12px;
    }
    .analysis h3{
      margin:0 0 8px;
      font-size:15px;
      color:#2f6b57;
    }
    .analysis table{
      margin-top:8px;
      font-size:13px;
    }
    .analysis th{
      background:#f3f6f4;
      width:200px;
    }
    .note{
      font-size:12px;
      color:#666;
      margin-top:8px;
    }

    /* ===== Footer ===== */
    .footer{
      display:flex;
      justify-content:space-between;
      margin-top:18px;
      font-size:14px;
    }

    /* ===== Buttons ===== */
    .actions{
      text-align:center;
      margin:16px 0;
    }
    .btn{
      background:#2f6b57;
      color:#fff;
      padding:10px 16px;
      border:none;
      border-radius:8px;
      font-size:14px;
      cursor:pointer;
    }

    /* ===== Print ===== */
    @media print{
      body{background:#fff;}
      .actions{display:none;}
      .page{box-shadow:none;}
    }
  </style>
</head>

<body>

<div class="page">

  <div class="header">
    <small>
      الإدارة العامة للتعليم بالمنطقة الشرقية<br>
      مكتب التعليم – وزارة التعليم
    </small>
    <h1>بطاقة توثيق منجز (برنامج)</h1>
  </div>

  <div class="content">

    <table>
      <tr>
        <th>اسم المعلم</th>
        <td>{{ teacher }}</td>
        <th>التخصص</th>
        <td>{{ subject }}</td>
      </tr>
      <tr>
        <th>المدرسة</th>
        <td>{{ school }}</td>
        <th>قائد المدرسة</th>
        <td>{{ principal }}</td>
      </tr>
      <tr>
        <th>اسم البرنامج / النشاط</th>
        <td colspan="3">{{ program_name }}</td>
      </tr>
      <tr>
        <th>وصف البرنامج</th>
        <td colspan="3">{{ program_desc }}</td>
      </tr>
    </table>

    <div class="section">الصور</div>

    <div class="images">
      <div class="img-box">
        <span>صورة (1)</span>
        {% if img1_url %}
          <img src="{{ img1_url }}">
        {% endif %}
      </div>
      <div class="img-box">
        <span>صورة (2)</span>
        {% if img2_url %}
          <img src="{{ img2_url }}">
        {% endif %}
      </div>
    </div>

    <!-- ===== OCR + GPT ===== -->
    <div class="analysis">
      <h3>ملخص الشاهد (OCR + GPT)</h3>

      <table>
        <tr>
          <th>الهدف</th>
          <td>{{ gpt_goal or "غير مذكور في الشاهد" }}</td>
        </tr>
        <tr>
          <th>الإجراء / التنفيذ</th>
          <td>{{ gpt_process or "غير مذكور في الشاهد" }}</td>
        </tr>
        <tr>
          <th>الأداة / التقنية</th>
          <td>{{ gpt_tool or "غير مذكور في الشاهد" }}</td>
        </tr>
        <tr>
          <th>أسلوب التقويم</th>
          <td>{{ gpt_assessment or "غير مذكور في الشاهد" }}</td>
        </tr>
        <tr>
          <th>الأثر التعليمي</th>
          <td>{{ gpt_impact or "غير مذكور في الشاهد" }}</td>
        </tr>
      </table>

      <div class="note">
        * تم توليد الملخص آليًا بالاعتماد على النص المستخرج من الصور (OCR) وتحليله باستخدام الذكاء الاصطناعي.
      </div>
    </div>

    <div class="footer">
      <div>
        توقيع قائد المدرسة:<br><br>
        .........................................
      </div>
      <div>
        ختم المدرسة
      </div>
    </div>

    <div class="actions">
      <button class="btn" onclick="window.print()">تحميل PDF</button>
    </div>

  </div>
</div>

</body>
</html>
